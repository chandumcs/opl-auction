<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>üèè OPL 2025 ‚Äî Auction Console</title>
<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#f3f6fa;
  color:#002244;
}
header{
  background:#052f57;
  color:#fff;
  text-align:center;
  padding:15px;
  font-size:20px;
  letter-spacing:1px;
  font-weight:600;
}
.container{
  max-width:900px;
  background:white;
  margin:25px auto;
  border-radius:14px;
  padding:25px;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
  text-align:center;
}
h2{
  color:#052f57;
}
.details{
  background:#052f57;
  color:white;
  border-radius:12px;
  padding:15px;
  margin-bottom:20px;
}
.details h3{
  margin:5px;
}
.price{
  font-size:38px;
  color:orange;
  margin:10px;
  font-weight:bold;
}
input[type="text"], select{
  padding:10px;
  width:220px;
  border-radius:8px;
  border:1px solid #ccc;
  text-align:center;
  font-size:15px;
  margin-top:10px;
}
button{
  border:none;
  cursor:pointer;
  font-size:15px;
  padding:10px 15px;
  border-radius:8px;
  margin:5px;
  transition:0.2s;
}
.btn-blue{background:#007bff;color:white;}
.btn-blue:hover{background:#005ec4;}
.btn-green{background:#16a34a;color:white;}
.btn-orange{background:orange;color:white;}
.btn-gray{background:#6c757d;color:white;}
.owner-boxes{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(130px,1fr));
  gap:10px;
  margin-top:20px;
}
.owner{
  background:orange;
  color:white;
  font-weight:600;
  border-radius:8px;
  padding:8px;
  cursor:pointer;
  transition:0.3s;
}
.owner:hover{
  transform:scale(1.05);
  background:#ff7b00;
}
.remaining{
  font-size:13px;
  color:#fff;
  opacity:0.85;
}
.export-box{
  margin-top:30px;
  background:#f8fafc;
  border:1px solid #d0d7e2;
  padding:15px;
  border-radius:10px;
}
.export-box select, .export-box button{
  margin:10px;
}
</style>
</head>
<body>
<header>üöÄ OPL 2025 ‚Äî Auction Console</header>

<div class="container">
  <div class="details" id="playerBox">
    <h3 id="playerName">No Player Selected</h3>
    <p id="playerType">Select a player to start</p>
    <div class="price" id="currentBid">‚Çπ0</div>
  </div>

  <div>
    <input type="text" id="searchPlayer" placeholder="Search Player Name...">
    <button class="btn-blue" onclick="searchPlayer()">Search</button>
  </div>

  <div style="margin-top:10px;">
    <button class="btn-blue" onclick="increaseBid(20000)">+ ‚Çπ20 K</button>
    <button class="btn-blue" onclick="increaseBid(50000)">+ ‚Çπ50 K</button>
    <input type="text" id="customBid" placeholder="Custom ‚Çπ" oninput="validateNumber(this)">
    <button class="btn-blue" onclick="addCustom()">Add</button>
  </div>

  <h3 style="margin-top:25px;">Owners</h3>
  <div class="owner-boxes" id="ownersContainer"></div>

  <div style="margin-top:15px;">
    <button class="btn-green" onclick="markSold()">‚úÖ Sold</button>
    <button class="btn-gray" onclick="resetBid()">üîÅ Reset</button>
  </div>

  <div class="export-box">
    <h4>üì¶ Export Sold Players</h4>
    <select id="ownerFilter">
      <option value="">All Owners</option>
    </select>
    <button class="btn-blue" onclick="exportData()">Export</button>
  </div>
</div>

<footer style="text-align:center;margin-top:30px;padding:15px;background:#052f57;color:white;">
  ¬© 2025 Olive Crypto Systems Pvt. Ltd.
</footer>

<script>
// Owners with starting purse
const owners = {
  "Sharath": 6450000000,
  "Sarath Chava": 7700000000,
  "Teja": 7500000000,
  "Vamsi": 6950000000,
  "Rajan": 6200000000,
  "Shabeer": 7000000000,
  "Raviraj": 7200000000,
  "Mahinder": 6600000000
};

// Player list
const players = [
  { name:"Avinash Komarabathini", type:"B" },
  { name:"Amarthya Porandla", type:"A" },
  { name:"Ajith Kumar M", type:"A" },
  { name:"Dinesh Kumar Peddi", type:"B" },
];

let selectedPlayer=null;
let currentBid=0;
let currentOwner=null;

// Populate owner cards
const ownersContainer=document.getElementById('ownersContainer');
Object.entries(owners).forEach(([name,balance])=>{
  const div=document.createElement('div');
  div.className='owner';
  div.innerHTML=`${name}<div class='remaining'>‚Çπ${(balance/10000000).toFixed(2)} Cr</div>`;
  div.onclick=()=>selectOwner(name);
  ownersContainer.appendChild(div);
});

// Fill owner dropdown
const dropdown=document.getElementById('ownerFilter');
Object.keys(owners).forEach(o=>{
  const opt=document.createElement('option');
  opt.value=o; opt.text=o;
  dropdown.appendChild(opt);
});

function searchPlayer(){
  const term=document.getElementById('searchPlayer').value.trim().toLowerCase();
  const player=players.find(p=>p.name.toLowerCase().includes(term));
  if(player){
    selectedPlayer=player;
    document.getElementById('playerName').innerText=player.name;
    document.getElementById('playerType').innerText=`Type: ${player.type}`;
    currentBid=player.type==="A"?20000000:5000000;
    document.getElementById('currentBid').innerText=`‚Çπ${currentBid.toLocaleString()}`;
  } else {
    alert("Player not found!");
  }
}

function increaseBid(amount){
  if(!selectedPlayer){alert("Select a player first!");return;}
  currentBid+=amount;
  document.getElementById('currentBid').innerText=`‚Çπ${currentBid.toLocaleString()}`;
}

function validateNumber(input){
  input.value=input.value.replace(/[^0-9]/g,'');
}

function addCustom(){
  const custom=parseInt(document.getElementById('customBid').value||"0");
  if(custom>0 && selectedPlayer){
    currentBid+=custom;
    document.getElementById('currentBid').innerText=`‚Çπ${currentBid.toLocaleString()}`;
    document.getElementById('customBid').value="";
  }
}

function selectOwner(name){
  currentOwner=name;
  alert(`${name} is the top bidder`);
}

function markSold(){
  if(!selectedPlayer||!currentOwner){
    alert("Select player and owner first!");return;
  }
  const ownerBal=owners[currentOwner];
  if(ownerBal<currentBid){
    alert("Insufficient balance!");
    return;
  }
  owners[currentOwner]-=currentBid;
  updateOwnersDisplay();

  soldData.push({
    Player:selectedPlayer.name,
    Type:selectedPlayer.type,
    SoldPrice:currentBid,
    Owner:currentOwner,
    Status:"Sold"
  });

  alert(`${selectedPlayer.name} sold to ${currentOwner} for ‚Çπ${currentBid.toLocaleString()}`);
  resetBid();
}

function resetBid(){
  selectedPlayer=null;
  currentBid=0;
  currentOwner=null;
  document.getElementById('playerName').innerText="No Player Selected";
  document.getElementById('playerType').innerText="Select a player to start";
  document.getElementById('currentBid').innerText="‚Çπ0";
}

function updateOwnersDisplay(){
  ownersContainer.innerHTML="";
  Object.entries(owners).forEach(([name,balance])=>{
    const div=document.createElement('div');
    div.className='owner';
    div.innerHTML=`${name}<div class='remaining'>‚Çπ${(balance/10000000).toFixed(2)} Cr</div>`;
    div.onclick=()=>selectOwner(name);
    ownersContainer.appendChild(div);
  });
}

// Export functionality
const soldData=[];
function exportData(){
  const owner=document.getElementById('ownerFilter').value;
  const filtered=owner?soldData.filter(d=>d.Owner===owner):soldData;
  if(filtered.length===0){alert("No data to export.");return;}
  const header=["Player","Type","SoldPrice","Owner","Status"];
  const rows=filtered.map(d=>[d.Player,d.Type,d.SoldPrice,d.Owner,d.Status]);
  const csv=[header.join(","),...rows.map(r=>r.join(","))].join("\n");
  const blob=new Blob([csv],{type:"text/csv"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download=`${owner||"All"}_SoldPlayers.csv`;
  a.click();
}
</script>
</body>
</html>

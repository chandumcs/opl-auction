<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Olive Premier League 2025 — Live Auction</title>

  <!-- Link CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>

<body>
  <!-- HEADER -->
  <header class="topbar">
    <div style="display:flex;align-items:center;">
      <img src="assets/logo.png" alt="Olive" class="logo" />
      <h1>Olive Premier League 2025 — Live Auction 
        <span class="live-badge">LIVE</span>
      </h1>
    </div>
    <div id="clock" class="clock"></div>
  </header>

  <!-- CURRENT PLAYER SECTION -->
  <section class="current-player">
    <div class="current-card">
      <h2 id="current-player-name">Loading player...</h2>
      <p>Employee ID: <span id="current-player-id">---</span></p>
      <div class="big-price">₹<span id="current-player-bid">0</span></div>
      <p>Bidder: <strong id="current-player-bidder">---</strong></p>
    </div>
  </section>

  <!-- ALL PLAYERS GRID -->
  <section class="grid" id="players-grid">
    <!-- Player cards will appear here -->
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    © 2025 Olive Crypto Systems Pvt. Ltd. — Olive Premier League Live Auction
  </footer>

  <!-- Firebase Config -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDw6bKsn...EsIxY",
      authDomain: "opl-2025-season-2.firebaseapp.com",
      databaseURL: "https://opl-2025-season-2-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "opl-2025-season-2",
      storageBucket: "opl-2025-season-2.appspot.com",
      messagingSenderId: "282929654033",
      appId: "1:282929654033:web:8c51d8414ef45f442b04b0",
      measurementId: "G-20BWK7G44S"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  <!-- LIVE AUCTION SCRIPT -->
  <script>
    const playersGrid = document.getElementById('players-grid');
    const currentName = document.getElementById('current-player-name');
    const currentId = document.getElementById('current-player-id');
    const currentBid = document.getElementById('current-player-bid');
    const currentBidder = document.getElementById('current-player-bidder');

    // Load all players in grid
    db.ref('players').on('value', snapshot => {
      const players = snapshot.val();
      playersGrid.innerHTML = '';

      for (let id in players) {
        const p = players[id];
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="player-name">${p.name}</div>
          <div class="prices">
            <span>Base ₹${p.basePrice}</span>
            <span>Bid ₹${p.currentBid}</span>
          </div>
          <div class="status ${p.status}">${p.status.toUpperCase()}</div>
        `;
        playersGrid.appendChild(card);
      }
    });

    // Listen for current auction player updates
    db.ref('currentAuction').on('value', snapshot => {
      const cur = snapshot.val();
      if (cur) {
        currentName.textContent = cur.name || "—";
        currentId.textContent = cur.employeeId || "—";
        currentBid.textContent = cur.currentBid || "0";
        currentBidder.textContent = cur.currentBidder || "—";
      }
    });

    // Clock
    function updateClock() {
      const now = new Date();
      document.getElementById('clock').innerText = now.toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
  </script>

</body>
</html>

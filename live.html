<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>OPL 2025 ‚Äî Live Auction View</title>
<style>
  body{font-family:'Segoe UI',Arial,sans-serif;background:#f4f8fb;margin:0;text-align:center;color:#002244;}
  header{background:#052f57;color:#fff;padding:20px;font-size:26px;font-weight:600;}
  .container{max-width:900px;margin:50px auto;padding:20px;}
  .player-card{background:#003d82;color:#fff;padding:30px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.15);}
  .player-name{font-size:30px;font-weight:700;margin:10px 0;}
  .details{font-size:17px;margin-bottom:10px;color:#e0e8ff;}
  .base{font-size:20px;color:#ffe47a;margin:10px 0;}
  .bid{font-size:32px;font-weight:700;margin-top:20px;color:#00ff8c;}
  .owner{font-size:18px;margin-top:10px;}
  footer{background:#052f57;color:#fff;padding:15px;margin-top:40px;border-radius:8px 8px 0 0;}
</style>
</head>
<body>

<header>üèè OPL 2025 ‚Äî Live Auction Feed</header>

<div class="container">
  <div class="player-card" id="playerCard">
    <div class="player-name" id="pName">Awaiting Next Player...</div>
    <div class="details" id="pInfo">‚Äî</div>
    <div class="base" id="pBase">Base Price: ‚Çπ0</div>
    <div class="bid" id="pBid">Current Bid: ‚Çπ0</div>
    <div class="owner" id="pOwner">Last Bid By: ‚Äî</div>
  </div>
</div>

<footer>¬© 2025 Olive Crypto Systems Pvt. Ltd.</footer>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyDw6bKSkntytlnKFGCW5OTwiv44vE5sIxY",
  authDomain: "opl-2025-season-2.firebaseapp.com",
  databaseURL: "https://opl-2025-season-2-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "opl-2025-season-2",
  storageBucket: "opl-2025-season-2.firebasestorage.app",
  messagingSenderId: "282929654033",
  appId: "1:282929654033:web:535ab2b78937cdfa2b04b0",
  measurementId: "G-WT75JLVR2E"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* Format in readable short form */
function formatPrice(value){
  if(!value)return"‚Çπ0";
  if(value>=10000000)return"‚Çπ"+(value/10000000).toFixed(1)+" Cr";
  if(value>=100000)return"‚Çπ"+(value/100000).toFixed(1)+" L";
  if(value>=1000)return"‚Çπ"+(value/1000).toFixed(0)+" K";
  return"‚Çπ"+value;
}

/* Real-time listener */
db.ref("currentPlayer").on("value",snap=>{
  const data=snap.val();
  const nameEl=document.getElementById("pName");
  const infoEl=document.getElementById("pInfo");
  const baseEl=document.getElementById("pBase");
  const bidEl=document.getElementById("pBid");
  const ownerEl=document.getElementById("pOwner");

  if(!data){
    nameEl.textContent="Awaiting Next Player...";
    infoEl.textContent="‚Äî";
    baseEl.textContent="Base Price: ‚Çπ0";
    bidEl.textContent="Current Bid: ‚Çπ0";
    ownerEl.textContent="Last Bid By: ‚Äî";
    return;
  }

  if(data.basePrice==0||!data.basePrice){
    data.basePrice=(data.type==="A")?20000000:5000000;
    db.ref("currentPlayer/basePrice").set(data.basePrice);
  }

  nameEl.textContent=data.name||"‚Äî";
  infoEl.textContent=`${data.category||""} ‚Ä¢ ${data.type||""}`;
  baseEl.textContent=`Base Price: ${formatPrice(data.basePrice)}`;
  bidEl.textContent=`Current Bid: ${formatPrice(data.currentBid||data.basePrice)}`;
  ownerEl.textContent=`Last Bid By: ${data.lastBidBy||"‚Äî"}`;
});
</script>
</body>
</html>
